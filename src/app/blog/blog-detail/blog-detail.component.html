<div class="main ui text container">
  <div class="page heading ui center aligned basic segment">
    <h1 class="uppercase">Blog</h1>
  </div>
  <img class="ui fluid rounded image" src="{{ post.image }}">
  <i class="calendar icon"></i> {{ post.date }} &nbsp;&nbsp;&nbsp;&nbsp;
  <i class="comments icon"></i> {{ post.comments_count }} comments
  <div class="ui divider"></div>
  <h1 class="ui header">{{ post.name }}</h1>
  <div class="description">
    {{ post.text }}
  </div>
</div>

<div class="ui secondary basic segment">
  <div class="comments ui text container">
    <div class="ui threaded comments">
      <h3 class="ui dividing header">Comments</h3>
      <div *ngFor="let comment of blogService.comments" class="comment">
        <a class="avatar">
          <img src="https://ui-avatars.com/api/?name={{ comment.username }}">
        </a>
        <div class="content">
          <a class="author">{{ comment.username }}</a>
          <div class="metadata">
            <span class="date">{{ comment.date }}</span>
          </div>
          <div class="text">
            {{ comment.text }}
          </div>
          <!-- <div class="actions"> -->
          <!--   <a class="reply" (click)="replyTo(comment.id)">Reply</a> -->
          <!-- </div> -->
        </div>
      </div>
      <div class="ui hidden divider"></div>
      <form (ngSubmit)="addComment(); form.form.reset()" #form="ngForm" class="ui reply form">
        <input [(ngModel)]="comment.reply" #reply="ngModel" name="reply" type="hidden"> 
        <div class="field">
          <textarea [(ngModel)]="comment.text" #text="ngModel" name="text" required></textarea>
        </div>
        <button *ngIf="usersService.signedIn()" class="ui blue labeled submit icon button" [disabled]="!form.form.valid">
          <i class="icon edit"></i> Add comment
        </button>
        <div *ngIf="!usersService.signedIn()">You need to be identified to comment.</div>
      </form>
    </div>
  </div>
</div>

<div class="ui hidden section divider"></div>
<div class="last ui container">
  <h1 class="ui header">Latest from our blog</h1>
  <app-blog-latest columns="two" limit="4"></app-blog-latest>
</div>
