// Angular
import { Component, OnInit } from '@angular/core';

// Models
import { Mail } from '../../store/models';

// Rxjs
import { Observable } from 'rxjs/Observable';

// Store
import { Store } from '@ngrx/store';
import { getMails } from '../../store/selectors';
import { GetMails, GetMailboxes, FinalLoading } from '../../store/actions';
import { OpenPgpService } from '../../store/services/openpgp.service';

declare var openpgp;

@Component({
  selector: 'app-mail-list',
  templateUrl: './mail-list.component.html',
  styleUrls: ['./mail-list.component.scss']
})
export class MailListComponent implements OnInit {
  mails: Mail[];
  getMailsState$: Observable<any>;
  getMailboxesState$: Observable<any>;
  readonly destroyed$: Observable<boolean>;

  // Public property of boolean type set false by default
  public isComposeVisible: boolean = false;

  constructor(private store: Store<any>, private openPgpService: OpenPgpService) {
    this.getMailsState$ = this.store.select(getMails);
    // this.store.select(state => state.mailboxes).takeUntil(this.destroyed$)
    // .subscribe((mailboxes) => {
    //   console.log(mailboxes);
    // });
  }

  ngOnInit() {
    this.getMailsState$.subscribe((mails) => {
      this.mails = mails;
      this.openPgpService.makeDecrypt('-----BEGIN PGP MESSAGE----- Version: PGPy v0.4.3 wcFMA/ktECUMnPdWAQ//ZLJJJikZ5RivoL68FuNS23K7ovDT9DP3XovTP2xbSj0C cppkxb4VDN4ORl1Fdy4ZPrZzZ2BR4KXNtVqAiokkNYSGwafrHJ+t5Pd/pH5zOBN5 4HSouQFJ36fZODD7PRYS+WkBDwZMqQuyeNSyd3S7v22pA4q8CE8k7RnTsaakdedy LXXVCHxxRtcSI6WZLD8CcjWMdXbXlD8tlOeely+rFuW2LZrveHPqZb6nLixwdThv gy8ZXncfukRG5/Bqajz3Hy1Qesa8nrgcjbLVlf9YikzlHew6F2uZBDyyqIRe6mEp ro2lo6twTFgmj0w79iavrJMur0R04q4+iIyTNssyQnM0CnPGA513s49N/JPfWfV3 TwaxGs8cVOIBYmjNkKqHj9+crJ5lKSpMmQd55DUC/EugiyjostgTPUlXFJat1/Vh yKJiUzpwhJZPF/qzE8kpf+eUOMAg5pifCUi2rQf38MTpk+teikK/jX09dm6GXuqA lu3txHzv+EiikgLF7zzRkolUGpvIl7CnjqtrFkGqurrlMArJnY0INMlU84Tj8zOA SeSGA3mPv/SogREMw/f7uZv5mZzpifZywtmpewzCC2ZpVmPKAK/k4G7b0Vfvq8yI 7Q48wdnfbHb7lyT6iRngrFUtGXqOhtcMNPBgOqR5KtDKieGalXnd8SoM8QVaQR/S wpgBSrmV1muhmw8NMSUJXbBSh2Z9tyI7VNsLekcFHlwSkycQrvKbq7WtwMgvGvt8 e43c33JGkdRi6zybcBkc8YSLx6a+pKfwznIEZwmXfCFVf9OBlyipXIk2WxnYHMpc ZerqB+HpW6VeNcXETLjoIyD8E48LlgmkF9uMsuo81IJyZR8WsjoAevwmCgBvYvMJ BkjAkic9IsbmdThPy9X8C1cvLa6PD3dOHkZ8daXGs+CttiTU0efIRBFt68vQFa+/ ImPpiG+8fAwwDkuaNBDEeCZlYC4gFQv63A1cwapmT6cyJR2pec756xUL86z7PMix 8fVzk6DHbCOBqTveweNwqwx3yYoIxLOM2h7t8632FRNLN65TxEemFiOS+IMjJ2kR Jj2TeI4bNDm1KsW7tgNjUmtKnWQyFTRk4DCF4/ZPNNlfgSXQPQotvoepLn645UU2 EMHW/KwskARrFb7O0GIieBs9fM3nGjNR0iXjDm83/1rmG6gUGgQ5MrCajBFFGE9v 5LrAvcaVH4eJPP6QQxItfuU085q/cKX2w2/Z/iR+wC19NMDnqA45wO+zev8mFj6r kKwNmoONBLaw7owpwsOO9wNK3dps+TibHf8rMf2YZKlC94YAeAsX8vhyOG9u12Ny Qj2M2s3B6CiUJ0a7syeyaD9x/PfdIHpebeMERNyR2HzjeZDjJ5faZYEJNi69mVvb YqVgBBuNnVjvEgo2t8XDnMcVCo/pbWNUSuSRYzYyYypg5+zeQH/W86qH1sLJVCt8 /ul7Kggd1clIJ0ZrU7VzJDGNV2qp6VJk2n7kg+dGFQu1cUQcYc5tD1iTNA8Zxg2h tLWr7SBunnJDKMvYRhB3h9y/Fc7eRqfCgqCqwRDuT6vHnHFmHLbhNXwiT8kMM4Ph 0Y/2GCyypkY9K0PSmTz4VT9O4MqBFxO94O/8l7i2IX/beIcfzkU+h56CTFxWnsiB Pb//dxOb9cx0+qBS3NvMGVBDL+n6924NOMLzvBIRxijHPMGDf4wGn7QmchsWcWGd yhgf77wPXj7BVLoWV59x6aBYNBB/niM2EkHQQf/BXaa7KCfmLfQanFvhJqutY0EQ 16lPezbRZhd3bFQpNnFSlrzOfAJ8q5Xs+/iLa1a6nL6rcoudMTDbChbW =2zFz -----END PGP MESSAGE----- ',
    '-----BEGIN PGP PUBLIC KEY BLOCK----- Version: PGPy v0.4.3 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 =iE1x -----END PGP PUBLIC KEY BLOCK----- ',
  '-----BEGIN PGP PRIVATE KEY BLOCK----- Version: PGPy v0.4.3 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 3COGB2svp258gw+Uwer4RGgxFZPGyprL9z/Yrw== =tcN4 -----END PGP PRIVATE KEY BLOCK----- ');
      this.store.dispatch(new FinalLoading({ loadingState: false }));
    });
    this.getMailboxes();
    this.getMails();

    // this.openPgpService.makeDecrypt(this..value).then((key) => {
    //   // this.store.dispatch(new SignUp(this.signupForm.value));
    //   this.fingerprint = key.fingerprint;
    //   this.privkey = key.privkey;
    //   this.pubkey = key.pubkey;
    // });
  }

  getMails() {
    this.store.dispatch(new GetMails({ limit: 1000, offset: 0 }));
  }

  getMailboxes() {
    this.store.dispatch(new GetMailboxes({ limit: 1000, offset: 0 }));
  }

  // == Show mail compose modal
  // == Setup click event to toggle mobile menu
  hideMailComposeModal() { // click handler
    const bool = this.isComposeVisible;
    this.isComposeVisible = false;
  }

}
