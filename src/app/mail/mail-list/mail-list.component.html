<div class="app-mail-list">
  <div class="toolbar">
    <div class="left-side">
      <div *ngIf="messages.length > 0" class="ui btn-filter btn-inbox btn-small large dropdown button" suiDropdown>
        <div class="ui fitted checkbox">
          <input type="checkbox">
          <label></label>
        </div>
        <i class="angle down icon"></i>
        <div class="menu" suiDropdownMenu>
          <div class="item" (click)="checkbox(messages)">All</div>
          <div class="item" (click)="checkbox()">None</div>
        </div>
      </div>
      <button class="ui large icon btn-refresh btn-inbox btn-small button" data-inverted="" data-tooltip="Refresh" data-position="bottom center" (click)="mailService.fetch()">
        <svg-icon class="svg-icon" src="/assets/img/inbox/list/refresh.svg"></svg-icon>
      </button>
      <div class="ui btn-submenu btn-inbox btn-small large dropdown button" suiDropdown>
        More
        <i class="angle down icon"></i>
        <div class="menu" suiDropdownMenu>
          <div class="item">Add star</div>
          <div class="item">Mark as read</div>
          <div class="item">Mark as unread</div>
        </div>
      </div>
      <div *ngIf="messages.length > 0" class="ui btn-actions btn-inbox btn-small large icon buttons">
        <button *ngIf="button('inbox')" class="ui btn-inbox btn-small button" (click)="mailService.move(selected, 'inbox')"><i class="inbox icon"></i></button>
        <button *ngIf="button('archive')" class="ui btn-inbox btn-small button" (click)="mailService.move(selected, 'archive')"><i class="archive icon"></i></button>
        <button *ngIf="button('spam')" class="ui btn-inbox btn-small button" (click)="mailService.move(selected, 'spam')"><i class="protect icon"></i></button>
        <button class="ui btn-inbox btn-small button" (click)="mailService.move(selected, 'trash')"><i class="trash icon"></i></button>
      </div>
    </div>
    <div *ngIf="page_max" class="right-side">
      <span class="text">Page {{ page }} of {{ page_max }}</span>
      <button class="ui btn-pag-left btn-inbox btn-small large left attached button" [routerLink]="['/mail', folder, 'page', page-1]" [disabled]="page <= 1">
        <i class="angle left icon"></i>
      </button>
      <button class="ui btn-pag-right btn-inbox btn-small large right attached button" [routerLink]="['/mail', folder, 'page', page+1]" [disabled]="page >= page_max">
        <i class="angle right icon"></i>
      </button>
    </div>
  </div>

  <div *ngIf="!messages.length">No messages yet notification (TODO).</div>

  <table class="ui large table mail-list">
    <tbody>
      <tr *ngFor="let message of messages" [ngClass]="{'read': message.read, 'checked': selected.includes(message) } " (click)="onMailClick(message)">
        <td class="collapsing" (click)="checkbox([message]); $event.stopPropagation()">
          <div class="ui fitted checkbox">
            <input type="checkbox" [checked]="selected.includes(message)">
            <label></label>
          </div>
        </td>
        <td *ngIf="message.folder != 'draft'" class="collapsing">
          <svg-icon class="svg-icon star-icon" src="/assets/img/inbox/list/star_on.svg" *ngIf="message.starred" (click)="mailService.star(message); $event.stopPropagation()"></svg-icon>
          <svg-icon class="svg-icon star-icon" src="/assets/img/inbox/list/star_off.svg" *ngIf="!message.starred" (click)="mailService.star(message); $event.stopPropagation()"></svg-icon>
        </td>
        <td class="collapsing">{{ message.from_header }}</td>
        <td>
          <b>{{ message.subject }}</b>
        </td>
        <td class="collapsing">{{ message.date }}, {{ message.time}} </td>
        <td class="collapsing">2.5KB</td>
        <td class="collapsing">{{ message.processed }}</td>
        <td *ngIf="message.secure && message.folder !='draft'" class="collapsing">
          <svg-icon class="svg-icon secure-icon" src="/assets/img/inbox/list/group.svg"></svg-icon>
        </td>
        <td *ngIf="!message.secure && message.folder !='draft'" class="collapsing">
          <svg-icon class="svg-icon secure-icon disabled" src="/assets/img/inbox/list/group.svg"></svg-icon>
        </td>
      </tr>

      <!-- Examples -->
      <tr>
        <td class="collapsing">
          <div class="ui fitted checkbox">
            <input type="checkbox">
            <label></label>
          </div>
        </td>
        <td class="collapsing">
          <svg-icon class="svg-icon star-icon" src="/assets/img/inbox/list/star_off.svg"></svg-icon>
        </td>
        <td class="collapsing">Administrator &lt;admin@ctemplar.com&gt;</td>
        <td>
          <div class="ui label">
            Delete in 5:25:32
          </div>
          <b>Welcome to CTemplar!</b>
        </td>
        <td class="collapsing">22 January 2018, 16:33 </td>
        <td class="collapsing">2.5KB</td>
        <td class="collapsing"></td>
        <td class="collapsing">
          <svg-icon class="svg-icon secure-icon" src="/assets/img/inbox/list/group.svg"></svg-icon>
        </td>
      </tr>
      <tr class="read">
        <td class="collapsing">
          <div class="ui fitted checkbox">
            <input type="checkbox">
            <label></label>
          </div>
        </td>
        <td class="collapsing">
          <svg-icon class="svg-icon star-icon" src="/assets/img/inbox/list/star_off.svg"></svg-icon>
        </td>
        <td class="collapsing">Administrator &lt;admin@ctemplar.com&gt;</td>
        <td>
          <b>Welcome to CTemplar!</b>
        </td>
        <td class="collapsing">22 January 2018, 16:33 </td>
        <td class="collapsing">2.5KB</td>
        <td class="collapsing"></td>
        <td class="collapsing">
          <svg-icon class="svg-icon secure-icon disabled" src="/assets/img/inbox/list/group.svg"></svg-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>
